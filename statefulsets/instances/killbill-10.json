{
  "size": "SMALL",
  "deploymentStrategy": "Recreate",
  "lbType": "internal",
  "elbIdleTimeoutSeconds": 300,
  "secretFileMounts": [],
  "protocolGroup": "tcp",
  "scaling": {
    "hpaEnabled": false,
    "hpaMinReplicas": 1,
    "hpaMaxReplicas": 1,
    "hpaMetricThreshold": 60
  },
  "liveness": {
  },
  "readiness": {
  },
  "ports": [
    {
      "name": "http",
      "containerPort": 8080,
      "lbPort": 8080
    }
  ],
  "build": {
    "ci": "external_image",
    "external_image": "killbill/killbill:0.22.26"
  },
  "credentialRequests": {
    "dbs": {
      "mysql" : [
        
      ],
      "mongo" : []
    },
    "queues": {
      "rabbitmq" : []
    },
    "cloud": [
    ]
  },
  "environmentVariables": {
    "static": {
      "KILLBILL_DAO_URL": "jdbc:postgresql://killbill-db1-writer:5432/killbill?currentSchema=killbillschema",
      "KILLBILL_OSGI_BUNDLE_INSTALL_DIR": "/mnt/var/lib/killbill/bundles" 
    },
    "dynamic": {
        "KILLBILL_DAO_PASSWORD": {
            "resourceType": "cluster",
            "resourceName": "secrets",
            "attribute": "PGSQL_PASSWORD"
          },
          "KILLBILL_DAO_USER": {
            "resourceType": "cluster",
            "resourceName": "secrets",
            "attribute": "PGSQL_USER"
          }
    }
  },
  "k8s_service_names" : [],

  "ingress_rules" : [
    {
      "ingress": "ingress",
      "path": "/",
      "targetPort": 8080,
      "domainPrefix": "killbill-10."
    }
  ],
  "resourceAllocationStrategy": "CPU_INTENSIVE",
  "persistentVolumeClaims" : [
    {
      "name": "plugins",
      "mountPath": "var/lib/killbill/bundles",
      "accessMode": "ReadWriteOnce",
      "storageSize": "5"
    }
  ],
  "mountLogsVolume": false,
  "command": ["/bin/bash","-c","sudo sed -i 's|/var/lib/killbill/bundles|/mnt/var/lib/killbill/bundles|' /var/lib/killbill/killbill.properties;/var/lib/killbill/killbill.sh"]
}